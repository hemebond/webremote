<!DOCTYPE html>
<html>
	<head>
		<title>Web Remote</title>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0">
		<meta name="viewport" content="user-scalable=false">

		<link rel="stylesheet" type="text/css" href="/static/themes/dark/theme.css">

		<script src="static/libs/jquery-1.9.1.js" type="text/javascript"></script>

		<script type="text/javascript" src="/static/libs/obviel-1.0b5/src/obviel/obviel-template.js"></script>
		<script type="text/javascript" src="/static/libs/obviel-1.0b5/src/obviel/obviel.js"></script>
	</head>
	<body>
		<div id="foo"></div>

		<ul id="app-list">
		</ul>

		<div id="player"></div>

		<script type="text/template" id="player-template">
			<div id="art">
				<img src="">
			</div>

			<div id="track">
				<dl>
					<dt>Title</dt>
					<dd id="track-title"></dd>
					<dt>Artist</dt>
					<dd id="track-artist">
						<ul></ul>
					</dd>
					<dt>Album</dt>
					<dd id="track-album"></dd>
				</dl>
			</div>

			<div id="controls">
				<div id="options">
					<div id="shuffle">
						<span class="icon"></span>
						<label for="shufflestatus">Shuffle</label>
						<input id="shufflestatus" name="shuffle" type="checkbox">
					</div>

					<div id="loop">
						<span class="icon"></span>
						<label for="loopstatus">Loop</label>
						<select id="loopstatus" name="loopstatus">
							<option value="None">None</option>
							<option value="Playlist">Playlist</option>
							<option value="Track">Track</option>
						</select>
					</div>
				</div>
				<div id="playback">
					<button id="previous">
						<span class="ui-button-text">Previous</span>
					</button>
					<button id="play">
						<span class="ui-button-text">Play</span>
					</button>
					<button id="next">
						<span class="ui-button-text">Next</span>
					</button>
				</div>

				<div id="progress-bar">
					<div class="ui-slider">
						<div class="ui-slider-range"></div>
					</div>
				</div>
			</div>
		</script>

		<script type='text/template' id="p">
			{@.}
			<ul>
				<li data-repeat="persons">{name}</li>
			</ul>
		</script>

		<script type="text/javascript">
			obviel.view({
				iface: 'player',
				htmlScript: 'player-template'
			});

			obviel.view({
				iface: 'app-list',
				//obvt: '{@.}<ul><li data-repeat="persons">{name}</li></ul>'
				htmlScript: 'p'
				/*render: function() {
					var appList = this;

					$.each(this.obj.apps, function(index, data) {
						var sub = $('<li/>').text(data.Identity);
						appList.el.append(sub);
					});
				}*/
			})

			$(document).ready(function() {
				$.getJSON('/', function(data) {
					/*$('#app-list').render({
						iface: 'app-list',
						applications: data
					});*/
					$('body').render({
						iface: 'app-list',
						persons: [
							{
								name: "Bob"
							},
							{
								name: "Steven"
							}
						]
					});
				});

				$.getJSON('/rhythmbox/player/', function(data) {
					data.iface = 'player';
					$('#player').render(data);
				});
			});
		</script>
	</body>
</html>
